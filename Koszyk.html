<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Koszyk | IQOS Polska</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'IQOS', Arial, sans-serif;
    }

    body {
      background-color: #fff;
      color: #34303D;
    }

    .free-product-item.selected {
      border: 2px solid #65D1CD;
      background-color: rgba(101, 209, 205, 0.05);
    }

    .special-offer-decline.selected {
      border: 2px solid #65D1CD;
      background-color: rgba(101, 209, 205, 0.05);
    }

    @font-face {
      font-family: 'IQOS';
      src: url('IQOS-Bold.woff2') format('woff2'), url('IQOS-Bold.woff') format('woff');
      font-weight: bold;
      font-display: swap;
    }
    @font-face {
      font-family: 'IQOS';
      src: url('IQOS-Regular.woff2') format('woff2'), url('IQOS-Regular.woff') format('woff');
      font-weight: normal;
      font-display: swap;
    }
    @font-face {
      font-family: 'IQOS';
      src: url('IQOS-Light.woff2') format('woff2'), url('IQOS-Light.woff') format('woff');
      font-weight: 300;
      font-display: swap;
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px 24px;
      background-color: #fff;
      border-bottom: 1px solid #f0f0f0;
    }

    .menu-icon {
      font-size: 24px;
      cursor: pointer;
    }

    .logo {
      text-align: center;
      font-size: 24px;
      font-weight: bold;
    }

    .icons {
      display: flex;
      gap: 15px;
      align-items: center;
    }

    .icon {
      font-size: 24px;
      cursor: pointer;
      position: relative;
    }

    .icon-badge {
      position: absolute;
      top: -8px;
      right: -8px;
      background-color: #65D1CD;
      color: white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 12px;
      font-weight: bold;
    }

    .summary-section {
      background-color: #65D1CD;
      padding: 40px 20px;
      text-align: center;
      color: #34303D;
    }

    .order-value {
      font-size: 42px;
      font-weight: bold;
      margin: 10px 0;
    }

    .order-title {
      font-size: 32px;
      margin-bottom: 10px;
    }

    .checkout-button {
      background-color: rgba(255, 255, 255, 0.4);
      color: #34303D;
      padding: 15px 30px;
      border-radius: 30px;
      display: inline-block;
      margin-top: 20px;
      font-size: 18px;
      cursor: pointer;
      font-weight: bold;
      text-decoration: none;
    }

    .product-item {
      display: flex;
      padding: 20px;
      border-bottom: 1px solid #eee;
      position: relative;
    }

    .product-image {
      width: 120px;
      height: 120px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 20px;
    }

    .product-image img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }

    .product-info {
      flex-grow: 1;
    }

    .product-title {
      font-size: 22px;
      font-weight: bold;
      margin-bottom: 5px;
    }

    .product-color {
      margin-bottom: 5px;
      color: #555;
    }

    .product-registration {
      margin-bottom: 10px;
      color: #555;
    }

    .product-price {
      font-size: 22px;
      font-weight: bold;
      margin-top: 10px;
      text-align: right;
    }

    .product-actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 15px;
    }

    .remove-product {
      text-decoration: underline;
      color: #34303D;
      cursor: pointer;
    }

    .quantity-control {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .quantity-button {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      border: 2px solid #ddd;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 20px;
      cursor: pointer;
      background-color: white;
    }

    .quantity {
      font-size: 22px;
    }

    .free-product-section {
      padding: 20px;
      margin-top: 20px;
    }

    .free-product-title {
      font-size: 28px;
      font-weight: bold;
      margin-bottom: 20px;
    }

    .free-product-item {
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      cursor: pointer;
    }

    .free-product-image {
      width: 100px;
      margin-right: 20px;
    }

    .free-product-image img {
      max-width: 100%;
    }

    .free-product-info {
      flex-grow: 1;
    }

    .free-product-name {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 5px;
    }

    .selected-mark {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background-color: #65D1CD;
      display: flex;
      justify-content: center;
      align-items: center;
      color: white;
      font-weight: bold;
      margin-left: auto;
    }

    .special-offer-decline {
      display: flex;
      align-items: center;
      padding: 20px;
      border: 1px solid #ddd;
      border-radius: 10px;
      margin: 20px 0;
      cursor: pointer;
    }

    .decline-icon {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      border: 3px solid #ddd;
      display: flex;
      justify-content: center;
      align-items: center;
      margin-right: 20px;
      position: relative;
    }

    .decline-icon::before,
    .decline-icon::after {
      content: '';
      position: absolute;
      width: 30px;
      height: 3px;
      background-color: #ddd;
    }

    .decline-icon::before {
      transform: rotate(45deg);
    }

    .decline-icon::after {
      transform: rotate(-45deg);
    }

    .decline-text {
      font-size: 18px;
      font-weight: bold;
    }

    .order-summary {
      padding: 20px;
      background-color: #f9f9f9;
    }

    .summary-row {
      display: flex;
      justify-content: space-between;
      padding: 15px 0;
      border-bottom: 1px solid #eee;
    }

    .summary-row:last-child {
      border-bottom: none;
      font-weight: bold;
    }

    .summary-label, .summary-value {
      font-size: 18px;
    }

    .promo-code {
      padding: 20px;
      border-bottom: 1px solid #eee;
    }

    .promo-input {
      width: 100%;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 5px;
      margin-bottom: 15px;
      font-size: 16px;
    }

    .promo-button {
      background-color: white;
      border: 2px solid #34303D;
      color: #34303D;
      padding: 12px 30px;
      border-radius: 25px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
    }

    .payment-section {
      padding: 20px;
    }

    .payment-title {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 15px;
    }

    .payment-methods {
      display: flex;
      gap: 10px;
      margin-bottom: 30px;
    }

    .payment-method {
      width: 60px;
      height: 40px;
      border: 1px solid #ddd;
      border-radius: 5px;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 5px;
    }

    .payment-method img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }

    .guarantees {
      margin-top: 20px;
    }

    .guarantee-item {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
    }

    .guarantee-icon {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background-color: #65D1CD;
      display: flex;
      justify-content: center;
      align-items: center;
      margin-right: 15px;
      color: white;
    }

    .disclaimer {
      padding: 20px;
      border: 1px solid #ddd;
      margin: 20px;
      text-align: center;
      font-size: 14px;
      line-height: 1.5;
      color: #666;
    }

    .empty-cart {
      padding: 40px 20px;
      text-align: center;
      font-size: 18px;
      color: #666;
    }

    /* –î–æ–±–∞–≤–∏–º —Å—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ø–æ–∫—É–ø–∫–∞–º" */
    .continue-shopping {
      background-color: white;
      border: 2px solid #34303D;
      color: #34303D;
      padding: 12px 30px;
      border-radius: 25px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      margin-top: 20px;
      display: inline-block;
      text-decoration: none;
    }
  </style>
</head>
<body>
<div class="header">
  <div class="menu-icon">‚ò∞</div>
  <div class="logo">IQOS</div>
  <div class="icons">
    <div class="icon">üë§</div>
    <div class="icon">üõí<span class="icon-badge">0</span></div>
  </div>
</div>

<div class="summary-section">
  <div class="order-title">Warto≈õƒá zam√≥wienia:</div>
  <div class="order-value" id="total-order-value">0,00 z≈Ç</div>
  <a href="platnosc.html" class="checkout-button">Przejd≈∫ do p≈Çatno≈õci</a>
</div>

<!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω–µ -->
<div id="cart-items-container">
  <!-- –ó–¥–µ—Å—å –±—É–¥—É—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è —Ç–æ–≤–∞—Ä—ã –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã -->
</div>

<div class="free-product-section">
  <h2 class="free-product-title">Darmowy produkt</h2>

  <div class="free-product-item selected">
    <div class="free-product-image">
      <img src="img/terea-nementolowy.png" alt="Zestaw niementolowy TEREA">
    </div>
    <div class="free-product-info">
      <div class="free-product-name">Darmowy Produkt Zestaw niementolowy TEREA (4)</div>
    </div>
    <div class="selected-mark">‚úì</div>
  </div>

  <div class="free-product-item">
    <div class="free-product-image">
      <img src="img/terea-mentolowy.png" alt="Zestaw mentolowy TEREA">
    </div>
    <div class="free-product-info">
      <div class="free-product-name">Darmowy Produkt Zestaw mentolowy TEREA (4)</div>
    </div>
  </div>

  <div class="special-offer-decline">
    <div class="decline-icon"></div>
    <div class="decline-text">Rezygnujƒô z oferty specjalnej</div>
  </div>
</div>

<div class="order-summary">
  <div class="summary-row">
    <div class="summary-label">Warto≈õƒá zam√≥wienia</div>
    <div class="summary-value" id="order-value">0,00 z≈Ç</div>
  </div>
  <div class="summary-row">
    <div class="summary-label">Koszt dostawy</div>
    <div class="summary-value">Darmowa</div>
  </div>
  <div class="summary-row">
    <div class="summary-label">Razem</div>
    <div class="summary-value" id="total-value">0,00 z≈Ç</div>
  </div>
</div>

<div class="promo-code">
  <input type="text" class="promo-input" placeholder="Wpisz kod rabatowy lub polecajƒÖcy">
  <button class="promo-button">Dodaj kod</button>
</div>

<div class="payment-section">
  <a href="platnosc.html" class="checkout-button" style="background-color: #34303D; color: white; display: block; text-align: center;">Przejd≈∫ do p≈Çatno≈õci</a>

  <!-- –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É "–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ø–æ–∫—É–ø–∫–∞–º" -->
  <a href="index.html" class="continue-shopping" style="display: block; text-align: center; margin-top: 15px;">Kontynuuj zakupy</a>

  <div class="payment-title">Akceptujemy:</div>
  <div class="payment-methods">
    <div class="payment-method">
      <img src="img/visa.png" alt="Visa">
    </div>
    <div class="payment-method">
      <img src="img/mastercard.png" alt="MasterCard">
    </div>
    <div class="payment-method">
      <img src="img/przelew.png" alt="Przelewy24">
    </div>
    <div class="payment-method">
      <img src="img/blik.png" alt="BLIK">
    </div>
  </div>

  <div class="payment-title">Zapewniamy:</div>
  <div class="guarantees">
    <div class="guarantee-item">
      <div class="guarantee-icon">‚úì</div>
      <div>DarmowƒÖ dostawƒô</div>
    </div>
    <div class="guarantee-item">
      <div class="guarantee-icon">‚úì</div>
      <div>60 dni na bezp≈Çatny zwrot</div>
    </div>
    <div class="guarantee-item">
      <div class="guarantee-icon">‚úì</div>
      <div>P≈Çatno≈õƒá po 30 dniach</div>
    </div>
    <div class="guarantee-item">
      <div class="guarantee-icon">‚úì</div>
      <div>Bezpiecze≈Ñstwo danych</div>
    </div>
  </div>
</div>

<div class="disclaimer">
  Ta strona jest dedykowana wy≈ÇƒÖcznie dla doros≈Çych palaczy i jest sklepem internetowym rekwizytu tytoniowego podgrzewajƒÖcego tyto≈Ñ. Ten produkt nie jest wolny od ryzyka i dostarcza nikotynƒô, kt√≥ra jest uzale≈ºniajƒÖca. Wy≈ÇƒÖcznie do u≈ºytku przez doros≈Çych.
</div>

<script>
  // –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ—Ä–∑–∏–Ω—ã –∏–∑ localStorage
  function getCart() {
    const cartData = localStorage.getItem('iqosCart');
    return cartData ? JSON.parse(cartData) : [];
  }

  // –§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ—Ä–∑–∏–Ω—ã –≤ localStorage
  function saveCart(cart) {
    localStorage.setItem('iqosCart', JSON.stringify(cart));
    updateCartBadge();
  }

  // –§—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
  function removeFromCart(index) {
    const cart = getCart();
    cart.splice(index, 1);
    saveCart(cart);
    renderCartItems();
    return cart;
  }

  // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–∞ –≤ –∫–æ—Ä–∑–∏–Ω–µ
  function updateCartItemQuantity(index, quantity) {
    const cart = getCart();
    cart[index].quantity = quantity;
    saveCart(cart);
    return cart;
  }

  // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–Ω–∞—á–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã
  function updateCartBadge() {
    const cart = getCart();
    const itemCount = cart.reduce((total, item) => total + item.quantity, 0);

    const cartBadges = document.querySelectorAll('.icon-badge');
    cartBadges.forEach(badge => {
      if (itemCount > 0) {
        badge.textContent = itemCount;
        badge.style.display = 'flex';
      } else {
        badge.style.display = 'none';
      }
    });
  }

  // –§—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ HTML –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω–µ
  function renderCartItems() {
    const cart = getCart();
    const cartContainer = document.getElementById('cart-items-container');

    // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
    cartContainer.innerHTML = '';

    // –ï—Å–ª–∏ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞
    if (cart.length === 0) {
      cartContainer.innerHTML = '<div class="empty-cart">Tw√≥j koszyk jest pusty</div>';
      updateTotalPrice(); // –û–±–Ω–æ–≤–ª—è–µ–º —Ü–µ–Ω—É, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å 0
      return;
    }

    // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
    cart.forEach((product, index) => {
      // –°–æ–∑–¥–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ div –¥–ª—è —Ç–æ–≤–∞—Ä–∞
      const productItem = document.createElement('div');
      productItem.className = 'product-item';

      // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ HTML-–∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
      productItem.innerHTML = `
        <div class="product-image">
          <img src="${product.image}" alt="${product.name} ${product.colorName}">
        </div>
        <div class="product-info">
          <div class="product-title">${product.name}</div>
          <div class="product-color">${product.colorName}</div>
          ${product.registration ? '<div class="product-registration">Zakup z rejestracjƒÖ</div>' : ''}
          <div class="product-actions">
            <div class="remove-product" data-index="${index}">Usu≈Ñ produkt</div>
            <div class="quantity-control">
              <button class="quantity-button decrease" data-index="${index}">‚àí</button>
              <span class="quantity">${product.quantity}</span>
              <button class="quantity-button increase" data-index="${index}">+</button>
            </div>
          </div>
        </div>
        <div class="product-price" data-price="${product.price}">${(product.price * product.quantity).toFixed(2).replace('.', ',')} z≈Ç</div>
      `;

      cartContainer.appendChild(productItem);
    });

    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–Ω–æ–ø–æ–∫
    addCartEventListeners();

    // –û–±–Ω–æ–≤–ª—è–µ–º –∏—Ç–æ–≥–æ–≤—É—é —Å—É–º–º—É –∫–æ—Ä–∑–∏–Ω—ã
    updateTotalPrice();
  }

  // –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–Ω–æ–ø–æ–∫ –≤ –∫–æ—Ä–∑–∏–Ω–µ
  function addCartEventListeners() {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–æ–∫ —É–¥–∞–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞
    document.querySelectorAll('.remove-product').forEach(button => {
      button.addEventListener('click', function() {
        const index = parseInt(this.getAttribute('data-index'));
        removeFromCart(index);
      });
    });

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
    document.querySelectorAll('.quantity-button').forEach(button => {
      button.addEventListener('click', function() {
        const index = parseInt(this.getAttribute('data-index'));
        const cart = getCart();
        let quantity = cart[index].quantity;

        if (this.classList.contains('increase')) {
          quantity++;
        } else if (this.classList.contains('decrease') && quantity > 1) {
          quantity--;
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤ –∫–æ—Ä–∑–∏–Ω–µ
        updateCartItemQuantity(index, quantity);

        // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω—ã
        renderCartItems();
      });
    });
  }

  // –§—É–Ω–∫—Ü–∏—è —Ä–∞—Å—á–µ—Ç–∞ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏—Ç–æ–≥–æ–≤–æ–π —Å—É–º–º—ã –∫–æ—Ä–∑–∏–Ω—ã
  function updateTotalPrice() {
    const cart = getCart();
    let total = 0;

    // –°—É–º–º–∏—Ä—É–µ–º —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤
    cart.forEach(product => {
      total += product.price * product.quantity;
    });

    // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ü–µ–Ω—É
    const formattedPrice = total.toFixed(2).replace('.', ',') + ' z≈Ç';

    // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ –º–µ—Å—Ç–∞, –≥–¥–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ü–µ–Ω–∞
    document.getElementById('total-order-value').textContent = formattedPrice;
    document.getElementById('order-value').textContent = formattedPrice;
    document.getElementById('total-value').textContent = formattedPrice;

    // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ –æ–ø–ª–∞—Ç–µ
    const checkoutButtons = document.querySelectorAll('.checkout-button');
    checkoutButtons.forEach(button => {
      if (cart.length === 0) {
        button.style.pointerEvents = 'none';
        button.style.opacity = '0.5';
      } else {
        button.style.pointerEvents = 'auto';
        button.style.opacity = '1';
      }
    });
  }

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–æ–≤–∞—Ä
  document.querySelectorAll('.free-product-item').forEach(item => {
    item.addEventListener('click', function() {
      // –£–¥–∞–ª—è–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å–æ –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
      document.querySelectorAll('.free-product-item').forEach(el => {
        el.classList.remove('selected');
        const mark = el.querySelector('.selected-mark');
        if (mark) mark.remove();
      });

      // –£–¥–∞–ª—è–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å –æ–ø—Ü–∏–∏ –æ—Ç–∫–∞–∑–∞
      document.querySelector('.special-offer-decline').classList.remove('selected');

      // –î–æ–±–∞–≤–ª—è–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ –∫–ª–∏–∫–Ω—É—Ç–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É
      this.classList.add('selected');

      // –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç–º–µ—Ç–∫—É –≤—ã–±–æ—Ä–∞
      if (!this.querySelector('.selected-mark')) {
        const mark = document.createElement('div');
        mark.className = 'selected-mark';
        mark.textContent = '‚úì';
        this.appendChild(mark);
      }
    });
  });

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –Ω–∞ –æ–ø—Ü–∏—é –æ—Ç–∫–∞–∑–∞ –æ—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
  document.querySelector('.special-offer-decline').addEventListener('click', function() {
    // –£–¥–∞–ª—è–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å–æ –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
    document.querySelectorAll('.free-product-item').forEach(el => {
      el.classList.remove('selected');
      const mark = el.querySelector('.selected-mark');
      if (mark) mark.remove();
    });

    // –î–æ–±–∞–≤–ª—è–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ –æ–ø—Ü–∏–∏ –æ—Ç–∫–∞–∑–∞
    this.classList.add('selected');
  });

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –Ω–∞ –∫–Ω–æ–ø–∫—É –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ –æ–ø–ª–∞—Ç–µ
  document.querySelectorAll('.checkout-button').forEach(button => {
    button.addEventListener('click', function(e) {
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –ø—É—Å—Ç–∞ –ª–∏ –∫–æ—Ä–∑–∏–Ω–∞
      const cart = getCart();
      if (cart.length === 0) {
        e.preventDefault();
        alert('Tw√≥j koszyk jest pusty. Dodaj produkty przed przej≈õciem do p≈Çatno≈õci.');
      }
    });
  });

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –Ω–∞ –∫–Ω–æ–ø–∫—É –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–º–æ–∫–æ–¥–∞
  document.querySelector('.promo-button').addEventListener('click', function() {
    const input = document.querySelector('.promo-input');
    if (input.value.trim() !== '') {
      alert('Kod promocyjny zastosowany!');
      input.value = '';
    } else {
      alert('Wprowad≈∫ kod promocyjny.');
    }
  });

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –Ω–∞ –∏–∫–æ–Ω–∫—É –∫–æ—Ä–∑–∏–Ω—ã –≤ —Ö–µ–¥–µ—Ä–µ
  document.querySelector('.icons .icon:nth-child(2)').addEventListener('click', function() {
    // –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∫–æ—Ä–∑–∏–Ω—ã –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º, –Ω–æ –¥–æ–±–∞–≤–ª—è–µ–º –¥–ª—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏—è
  });

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –Ω–∞ –∏–∫–æ–Ω–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  document.querySelector('.icons .icon:first-child').addEventListener('click', function() {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    const storedUser = localStorage.getItem('iqosUser');
    if (storedUser && JSON.parse(storedUser).isLoggedIn) {
      // –ï—Å–ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω - –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–æ—Ñ–∏–ª—è
      window.location.href = 'account.html';
    } else {
      // –ï—Å–ª–∏ –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω - –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞
      window.location.href = 'login.html';
    }
  });

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–æ—Ä–∑–∏–Ω—ã
  document.addEventListener('DOMContentLoaded', function() {
    // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ç–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω–µ
    renderCartItems();

    // –û–±–Ω–æ–≤–ª—è–µ–º –∑–Ω–∞—á–æ–∫ –∫–æ—Ä–∑–∏–Ω—ã
    updateCartBadge();

    // –ü–æ–ª—É—á–∞–µ–º —Å—Å—ã–ª–∫–∏ –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç—ã –º–µ–Ω—é
    const menuIcon = document.querySelector('.menu-icon');
    const mainMenu = document.getElementById('main-menu');
    const closeMainMenu = document.getElementById('close-main-menu');
    const menuProdukty = document.getElementById('menu-produkty');
    const produktySubmenu = document.getElementById('produkty-submenu');
    const closeProduktySubmenu = document.getElementById('close-produkty-submenu');
    const backToMainMenu = document.getElementById('back-to-main-menu');

    // –û—Ç–∫—Ä—ã—Ç–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∏–∫–æ–Ω–∫—É –º–µ–Ω—é
    if (menuIcon && mainMenu) {
      menuIcon.addEventListener('click', function() {
        mainMenu.style.display = 'block';
        document.body.style.overflow = 'hidden'; // –ó–∞–ø—Ä–µ—â–∞–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É –æ—Å–Ω–æ–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
      });
    }

    // –ó–∞–∫—Ä—ã—Ç–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –º–µ–Ω—é
    if (closeMainMenu && mainMenu) {
      closeMainMenu.addEventListener('click', function() {
        mainMenu.style.display = 'none';
        document.body.style.overflow = ''; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É
      });
    }

    // –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–¥–º–µ–Ω—é Produkty
    if (menuProdukty && mainMenu && produktySubmenu) {
      menuProdukty.addEventListener('click', function() {
        mainMenu.style.display = 'none';
        produktySubmenu.style.display = 'block';
      });
    }

    // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–¥–º–µ–Ω—é Produkty
    if (closeProduktySubmenu && produktySubmenu) {
      closeProduktySubmenu.addEventListener('click', function() {
        produktySubmenu.style.display = 'none';
        document.body.style.overflow = ''; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É
      });
    }

    // –í–æ–∑–≤—Ä–∞—Ç –∫ –æ—Å–Ω–æ–≤–Ω–æ–º—É –º–µ–Ω—é
    if (backToMainMenu && produktySubmenu && mainMenu) {
      backToMainMenu.addEventListener('click', function() {
        produktySubmenu.style.display = 'none';
        mainMenu.style.display = 'block';
      });
    }

    // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ –æ–±–ª–∞—Å—Ç–∏
    if (mainMenu && produktySubmenu) {
      window.addEventListener('click', function(event) {
        if (event.target === mainMenu) {
          mainMenu.style.display = 'none';
          document.body.style.overflow = '';
        }
        if (event.target === produktySubmenu) {
          produktySubmenu.style.display = 'none';
          document.body.style.overflow = '';
        }
      });
    }
  });
  // –≠—Ç–æ—Ç –∫–æ–¥ –Ω—É–∂–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å –≤ <head> –∏–ª–∏ –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã–≤–∞—é—â–∏–º —Ç–µ–≥–æ–º </body> –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ index.html

  document.addEventListener('DOMContentLoaded', function() {
    // 1. –ó–∞–º–µ–Ω—è–µ–º —ç–º–æ–¥–∑–∏-–∏–∫–æ–Ω–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ SVG
    const userIcon = document.querySelector('.icon:first-child');
    if (userIcon) {
      // –°–æ–∑–¥–∞–µ–º SVG –∏–∫–æ–Ω–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      const userSvg = `
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="8" r="5"></circle>
        <path d="M20 21a8 8 0 1 0-16 0"></path>
      </svg>
    `;

      // –£–¥–∞–ª—è–µ–º —ç–º–æ–¥–∑–∏ –∏ –≤—Å—Ç–∞–≤–ª—è–µ–º SVG
      userIcon.innerHTML = userSvg;

      // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ (–µ—Å–ª–∏ –µ–≥–æ –µ—â–µ –Ω–µ—Ç)
      userIcon.addEventListener('click', function() {
        const storedUser = localStorage.getItem('iqosUser');
        if (storedUser && JSON.parse(storedUser).isLoggedIn) {
          window.location.href = 'account.html';
        } else {
          window.location.href = 'login.html';
        }
      });
    }

    // 2. –ó–∞–º–µ–Ω—è–µ–º —ç–º–æ–¥–∑–∏-–∏–∫–æ–Ω–∫—É –∫–æ—Ä–∑–∏–Ω—ã –Ω–∞ SVG
    const cartIcon = document.querySelector('.icon:nth-child(2)');
    if (cartIcon) {
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ –∑–Ω–∞—á–æ–∫ badge
      let badge = cartIcon.querySelector('.icon-badge');

      // –°–æ–∑–¥–∞–µ–º SVG –∏–∫–æ–Ω–∫—É –∫–æ—Ä–∑–∏–Ω—ã
      const cartSvg = `
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M6 2h12l3 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9l3-7z"></path>
        <path d="M16 10a4 4 0 0 1-8 0"></path>
      </svg>
    `;

      // –£–¥–∞–ª—è–µ–º —ç–º–æ–¥–∑–∏ –∏ –≤—Å—Ç–∞–≤–ª—è–µ–º SVG
      cartIcon.innerHTML = cartSvg;

      // –ï—Å–ª–∏ –∑–Ω–∞—á–æ–∫ badge —É–∂–µ –±—ã–ª, –¥–æ–±–∞–≤–ª—è–µ–º –µ–≥–æ –∑–∞–Ω–æ–≤–æ
      if (badge) {
        cartIcon.appendChild(badge);
      } else {
        // –ï—Å–ª–∏ –∑–Ω–∞—á–∫–∞ –Ω–µ –±—ã–ª–æ, —Å–æ–∑–¥–∞–µ–º –µ–≥–æ
        badge = document.createElement('span');
        badge.className = 'icon-badge';
        badge.style.position = 'absolute';
        badge.style.top = '-8px';
        badge.style.right = '-8px';
        badge.style.backgroundColor = '#65D1CD';
        badge.style.color = 'white';
        badge.style.borderRadius = '50%';
        badge.style.width = '20px';
        badge.style.height = '20px';
        badge.style.display = 'none'; // –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç
        badge.style.justifyContent = 'center';
        badge.style.alignItems = 'center';
        badge.style.fontSize = '12px';
        badge.style.fontWeight = 'bold';

        // –î–æ–±–∞–≤–ª—è–µ–º –∑–Ω–∞—á–æ–∫ –≤ –∏–∫–æ–Ω–∫—É –∫–æ—Ä–∑–∏–Ω—ã
        cartIcon.appendChild(badge);
      }

      // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ (–µ—Å–ª–∏ –µ–≥–æ –µ—â–µ –Ω–µ—Ç)
      cartIcon.addEventListener('click', function() {
        window.location.href = 'Koszyk.html';
      });
    }

    // 3. –û–±–Ω–æ–≤–ª—è–µ–º –∑–Ω–∞—á–æ–∫ –∫–æ—Ä–∑–∏–Ω—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    function updateCartBadge() {
      const cartData = localStorage.getItem('iqosCart');
      if (cartData) {
        const cart = JSON.parse(cartData);
        const itemCount = cart.reduce((total, item) => total + item.quantity, 0);

        const cartBadges = document.querySelectorAll('.icon-badge');
        cartBadges.forEach(badge => {
          if (itemCount > 0) {
            badge.textContent = itemCount;
            badge.style.display = 'flex';
          } else {
            badge.style.display = 'none';
          }
        });
      }
    }

    // 4. –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–Ω–∞—á–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞
    // –ò—â–µ–º —Ñ—É–Ω–∫—Ü–∏—é addProductToCart –∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ–º –µ—ë –¥–ª—è –≤—ã–∑–æ–≤–∞ updateCartBadge
    const scripts = document.querySelectorAll('script');
    let scriptModified = false;

    scripts.forEach(script => {
      if (script.textContent.includes('function addProductToCart') && !scriptModified) {
        if (!script.textContent.includes('updateCartBadge();')) {
          const modifiedScript = script.textContent.replace(
            'localStorage.setItem(\'iqosCart\', JSON.stringify(cart));',
            'localStorage.setItem(\'iqosCart\', JSON.stringify(cart));\n\n      // –û–±–Ω–æ–≤–ª—è–µ–º –∑–Ω–∞—á–æ–∫ –∫–æ—Ä–∑–∏–Ω—ã\n      updateCartBadge();'
          );

          // –°–æ–∑–¥–∞–µ–º –∏ –≤—ã–ø–æ–ª–Ω—è–µ–º –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç
          const newScript = document.createElement('script');
          newScript.textContent = modifiedScript;
          document.body.appendChild(newScript);
          scriptModified = true;
        }
      }
    });

    // –î–µ–ª–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é updateCartBadge –≥–ª–æ–±–∞–ª—å–Ω–æ –¥–æ—Å—Ç—É–ø–Ω–æ–π
    window.updateCartBadge = updateCartBadge;

    // –û–±–Ω–æ–≤–ª—è–µ–º –∑–Ω–∞—á–æ–∫ –∫–æ—Ä–∑–∏–Ω—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    updateCartBadge();
  });
</script>

<!-- –û—Å–Ω–æ–≤–Ω–æ–µ –º–µ–Ω—é -->
<div id="main-menu" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 2000;">
  <div style="background-color: white; width: 100%; height: 100%; max-width: 400px; position: relative; overflow-y: auto;">
    <div style="display: flex; justify-content: space-between; align-items: center; padding: 20px; border-bottom: 1px solid #eee;">
      <div style="font-size: 24px; visibility: hidden;">X</div>
      <div style="font-size: 24px; font-weight: bold;">IQOS</div>
      <div style="font-size: 24px; cursor: pointer;" id="close-main-menu">‚úï</div>
    </div>

    <div style="padding: 0 20px;">
      <div style="padding: 30px 0; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; cursor: pointer;" id="menu-produkty">
        <span style="font-size: 28px; font-weight: bold;">Produkty</span>
        <span style="font-size: 28px;">‚Ä∫</span>
      </div>



      <div style="padding: 30px 0; border-bottom: 1px solid #eee;">
        <div style="font-size: 28px; font-weight: bold; margin-bottom: 10px;">Oferty specjalne</div>
        <div style="font-size: 18px; color: #666;">Zaloguj siƒô i sprawd≈∫</div>
      </div>

    </div>
  </div>
</div>

<!-- –ü–æ–¥–º–µ–Ω—é Produkty -->
<div id="produkty-submenu" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 2100;">
  <div style="background-color: white; width: 100%; height: 100%; max-width: 400px; position: relative; overflow-y: auto;">
    <div style="display: flex; justify-content: space-between; align-items: center; padding: 20px; border-bottom: 1px solid #eee;">
      <div style="font-size: 24px; cursor: pointer;" id="back-to-main-menu">‚Üê</div>
      <div style="font-size: 24px; font-weight: bold;">Produkty</div>
      <div style="font-size: 24px; cursor: pointer;" id="close-produkty-submenu">‚úï</div>
    </div>

    <div style="padding: 0 20px;">
      <a href="index.html" style="text-decoration: none; color: inherit;">
        <div style="padding: 30px 0; border-bottom: 1px solid #eee;">
          <span style="font-size: 28px; font-weight: bold;">Seria IQOS ILUMA za 49 z≈Ç</span>
        </div>
      </a>

      <div style="padding: 30px 0; border-bottom: 1px solid #eee;">
        <span style="font-size: 28px; font-weight: bold;">lil SOLID Ez za 49 z≈Ç</span>
      </div>



      <div style="padding: 30px 0; border-bottom: 1px solid #eee;">
        <div style="font-size: 28px; font-weight: bold; margin-bottom: 10px;">Oferty specjalne</div>
        <div style="font-size: 18px; color: #666;">Zaloguj siƒô i sprawd≈∫</div>
      </div>


    </div>
  </div>
</div>
</body>
</html>
