<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Podgrzewacze tytoniu IQOS ILUMA | IQOS Polska</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'IQOS', Arial, sans-serif;
    }

    body {
      background-color: #f5f5f5;
    }

    @font-face {
      font-family: 'IQOS';
      src: url('IQOS-Bold.woff2') format('woff2'), url('IQOS-Bold.woff') format('woff');
      font-weight: bold;
      font-display: swap;
    }
    @font-face {
      font-family: 'IQOS';
      src: url('IQOS-Regular.woff2') format('woff2'), url('IQOS-Regular.woff') format('woff');
      font-weight: normal;
      font-display: swap;
    }
    @font-face {
      font-family: 'IQOS';
      src: url('IQOS-Light.woff2') format('woff2'), url('IQOS-Light.woff') format('woff');
      font-weight: 300;
      font-display: swap;
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px 24px;
      background-color: #fff;
      border-bottom: 1px solid #f0f0f0;
    }

    .menu-icon {
      font-size: 24px;
      cursor: pointer;
    }

    .logo {
      text-align: center;
      font-size: 24px;
      font-weight: bold;
    }

    .icons {
      display: flex;
      gap: 15px;
    }

    .icon {
      font-size: 24px;
      cursor: pointer;
    }

    .navigation {
      display: flex;
      padding: 16px;
      gap: 10px;
      justify-content: center;
    }

    .nav-button {
      padding: 12px 20px;
      border-radius: 25px;
      cursor: pointer;
      text-align: center;
      font-size: 14px;
      font-weight: normal;
    }

    .primary-nav {
      background-color: #2e2c33;
      color: white;
    }

    .secondary-nav {
      border: 1px solid #2e2c33;
      color: #2e2c33;
    }

    .main-title {
      padding: 20px;
      font-size: 32px;
      color: #2e2c33;
      font-weight: bold;
    }

    .filter-section {
      padding: 0 20px;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
    }

    .filter-icon {
      margin-right: 10px;
    }

    .filter-text {
      font-weight: bold;
      border-bottom: 2px solid #2e2c33;
      padding-bottom: 5px;
    }

    .product-container {
      padding: 20px;
      background-color: #f9f9f9;
      margin-bottom: 20px;
    }

    .product-link {
      text-decoration: none;
      color: inherit;
    }

    .product-image {
      width: 100%;
      display: flex;
      justify-content: center;
      padding: 20px 0;
    }

    .product-image img {
      max-height: 400px;
      object-fit: contain;
    }

    .color-options {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin: 20px 0;
    }

    .color-option {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      cursor: pointer;
    }

    .color-option.active {
      border: 2px solid #2e2c33;
    }

    .product-title {
      font-size: 24px;
      font-weight: bold;
      color: #2e2c33;
      margin: 20px 0 10px 0;
    }

    .product-description {
      color: #555;
      margin-bottom: 10px;
    }

    .product-price {
      font-size: 24px;
      font-weight: bold;
      margin: 15px 0;
    }

    .product-rating {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
    }

    .stars {
      color: #d4af37;
      margin-right: 10px;
    }

    .rating-count {
      color: #555;
    }

    .add-to-cart {
      background-color: #2e2c33;
      color: white;
      padding: 15px;
      border-radius: 30px;
      text-align: center;
      cursor: pointer;
      margin: 20px 0;
      font-weight: bold;
    }

    /* Color options */
    .gray { background-color: #808080; }
    .beige { background-color: #d2b48c; }
    .pink { background-color: #db7093; }
    .blue { background-color: #4682b4; }
    .green { background-color: #8fbc8f; }
    .purple { background-color: #9370db; }
    .black { background-color: #000000; }
  </style>
</head>
<body>
<div class="header">
  <div class="menu-icon">☰</div>
  <div class="logo">IQOS</div>
  <div class="icons">
    <div class="icon">👤</div>
    <div class="icon">🛒</div>
  </div>
</div>

<div class="navigation">
  <div class="nav-button primary-nav">Podgrzewacze tytoniu IQOS ILUMA i</div>
  <div class="nav-button secondary-nav">Akcesoria</div>
</div>

<h1 class="main-title">Podgrzewacze tytoniu IQOS ILUMA i (3)</h1>

<div class="filter-section">
        <span class="filter-icon">
            <svg width="24" height="24" viewBox="0 0 24 24">
                <path d="M4.5 8H20.5" stroke="#34303D" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M9.5 17H15.5" stroke="#34303D" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M7.5 12.5H17.5" stroke="#34303D" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
        </span>
  <span class="filter-text">Filtry</span>
</div>

<div id="product-listings">
  <!-- First product container - IQOS ILUMA ONE -->
  <div class="product-container" id="product-1">
    <a href="iqos-product-page.html" class="product-link">
      <div class="product-image">
        <img src="img/iqos iluma.png" alt="IQOS ILUMA i ONE" id="product-1-image">
      </div>
      <div class="product-title">IQOS ILUMA i ONE</div>
    </a>
    <div class="color-options">
      <div class="color-option gray active" data-color="gray" data-product="1"></div>
      <div class="color-option beige" data-color="beige" data-product="1"></div>
      <div class="color-option pink" data-color="pink" data-product="1"></div>
      <div class="color-option blue" data-color="blue" data-product="1"></div>
      <div class="color-option green" data-color="green" data-product="1"></div>
    </div>
    <div class="product-description">Jednoczęściowy i poręczny, z technologią Smartcore Induction System.</div>
    <div class="product-price">49,00 zł</div>
    <div class="add-to-cart">Dodaj do koszyka</div>
  </div>

  <!-- Second product container - IQOS ILUMA -->
  <div class="product-container" id="product-2">
    <a href="IQOS ILUMA Product Page.html" class="product-link">
      <div class="product-image">
        <img src="img/iluma.png" alt="IQOS ILUMA" id="product-2-image">
      </div>
      <div class="product-title">IQOS ILUMA i</div>
    </a>
    <div class="color-options">
      <div class="color-option green active" data-color="green" data-product="2"></div>
      <div class="color-option beige" data-color="beige" data-product="2"></div>
      <div class="color-option gray" data-color="gray" data-product="2"></div>
      <div class="color-option pink" data-color="pink" data-product="2"></div>
      <div class="color-option blue" data-color="blue" data-product="2"></div>
    </div>
    <div class="product-description">Design znany z IQOS-a ORIGINALS DUO, z technologią Smartcore Induction System.</div>
    <div class="product-price">49,00 zł</div>
    <div class="product-rating">
      <div class="stars">★★★★★</div>
      <div class="rating-count">4.7 (123)</div>
    </div>
    <div class="add-to-cart">Dodaj do koszyka</div>
  </div>

  <!-- Third product container - IQOS ILUMA PRIME -->
  <div class="product-container" id="product-3">
    <a href="IQOS ILUMA PRIME Product Page.html" class="product-link">
      <div class="product-image">
        <img src="img/iluma prime.png" alt="IQOS ILUMA PRIME" id="product-3-image">
      </div>
      <div class="product-title">IQOS ILUMA PRIME</div>
    </a>
    <div class="color-options">
      <div class="color-option green active" data-color="green" data-product="3"></div>
      <div class="color-option beige" data-color="beige" data-product="3"></div>
      <div class="color-option purple" data-color="purple" data-product="3"></div>
      <div class="color-option black" data-color="black" data-product="3"></div>
    </div>
    <div class="product-description">Najwyższej jakości design, z technologią Smartcore Induction System.</div>
    <div class="product-price">49,00 zł</div>
    <div class="product-rating">
      <div class="stars">★★★★★</div>
      <div class="rating-count">4.9 (86)</div>
    </div>
    <div class="add-to-cart">Dodaj do koszyka</div>
  </div>
</div>

<script>

  // JavaScript to update the active color and change the image accordingly
  document.querySelectorAll('.color-option').forEach(option => {
    option.addEventListener('click', function() {
      const productId = this.getAttribute('data-product');
      const color = this.getAttribute('data-color');

      // Remove active class from all options in the same product
      document.querySelectorAll(`.color-option[data-product="${productId}"]`).forEach(el => {
        el.classList.remove('active');
      });

      // Add active class to the clicked option
      this.classList.add('active');

      // Update image source based on product and color
      const imageElement = document.getElementById(`product-${productId}-image`);

      // Map of color names for file naming
      const colorFileNames = {
        'gray': 'gray',
        'beige': 'beige',
        'pink': 'pink',
        'blue': 'blue',
        'green': 'green',
        'purple': 'purple',
        'black': 'black'
      };

      // Map of color display names
      const colorDisplayNames = {
        'gray': 'Pebble Grey',
        'beige': 'Beige',
        'pink': 'Rose',
        'blue': 'Ocean Blue',
        'green': 'Moss Green',
        'purple': 'Purple',
        'black': 'Black'
      };

      // Set the appropriate image source based on product and color
      if (productId === "1") {
        imageElement.src = `img/iluma one ${colorFileNames[color]}.png`;
        imageElement.alt = `IQOS ILUMA ONE w kolorze ${colorDisplayNames[color]}`;
      } else if (productId === "2") {
        imageElement.src = `img/iluma ${colorFileNames[color]}.png`;
        imageElement.alt = `IQOS ILUMA w kolorze ${colorDisplayNames[color]}`;
      } else if (productId === "3") {
        imageElement.src = `img/iluma prime ${colorFileNames[color]}.png`;
        imageElement.alt = `IQOS ILUMA PRIME w kolorze ${colorDisplayNames[color]}`;
      }

      // Add error handling in case the image doesn't exist
      imageElement.onerror = function() {
        // Fallback to default image if specific color image doesn't exist
        if (productId === "1") {
          this.src = "img/iluma one.png";
        } else if (productId === "2") {
          this.src = "img/iluma.png";
        } else if (productId === "3") {
          this.src = "img/iluma prime.png";
        }
      };
    });
  });


  document.addEventListener('DOMContentLoaded', function() {
    // Получаем ссылки на элементы меню
    const menuIcon = document.querySelector('.menu-icon');
    const mainMenu = document.getElementById('main-menu');
    const closeMainMenu = document.getElementById('close-main-menu');
    const menuProdukty = document.getElementById('menu-produkty');
    const produktySubmenu = document.getElementById('produkty-submenu');
    const closeProduktySubmenu = document.getElementById('close-produkty-submenu');
    const backToMainMenu = document.getElementById('back-to-main-menu');

    // Открытие основного меню при клике на иконку меню
    menuIcon.addEventListener('click', function() {
      mainMenu.style.display = 'block';
      document.body.style.overflow = 'hidden'; // Запрещаем прокрутку основной страницы
    });

    // Закрытие основного меню
    closeMainMenu.addEventListener('click', function() {
      mainMenu.style.display = 'none';
      document.body.style.overflow = ''; // Возвращаем прокрутку
    });

    // Открытие подменю Produkty
    menuProdukty.addEventListener('click', function() {
      mainMenu.style.display = 'none';
      produktySubmenu.style.display = 'block';
    });

    // Закрытие подменю Produkty
    closeProduktySubmenu.addEventListener('click', function() {
      produktySubmenu.style.display = 'none';
      document.body.style.overflow = ''; // Возвращаем прокрутку
    });

    // Возврат к основному меню
    backToMainMenu.addEventListener('click', function() {
      produktySubmenu.style.display = 'none';
      mainMenu.style.display = 'block';
    });

    // Закрытие меню при клике вне его области
    window.addEventListener('click', function(event) {
      if (event.target === mainMenu) {
        mainMenu.style.display = 'none';
        document.body.style.overflow = '';
      }
      if (event.target === produktySubmenu) {
        produktySubmenu.style.display = 'none';
        document.body.style.overflow = '';
      }
    });
  });
  document.addEventListener('DOMContentLoaded', function() {
    // Проверяем, авторизован ли пользователь
    const storedUser = localStorage.getItem('iqosUser');
    let userLoggedIn = false;

    if (storedUser) {
      const userData = JSON.parse(storedUser);
      userLoggedIn = userData.isLoggedIn;
    }

    // Получаем элементы меню
    const authMenuItem = document.getElementById('auth-menu-item');
    const logoutMenuItem = document.getElementById('logout-menu-item');

    // Отображаем соответствующие пункты меню
    if (userLoggedIn) {
      authMenuItem.style.display = 'none';
      logoutMenuItem.style.display = 'flex';
    } else {
      authMenuItem.style.display = 'flex';
      logoutMenuItem.style.display = 'none';
    }

    // Обработчик клика по "Zaloguj się"
    authMenuItem.addEventListener('click', function() {
      window.location.href = 'login.html';
    });

    // Обработчик клика по "Wyloguj się"
    logoutMenuItem.addEventListener('click', function() {
      // Если пользователь авторизован, меняем его статус
      if (storedUser) {
        const userData = JSON.parse(storedUser);
        userData.isLoggedIn = false;
        localStorage.setItem('iqosUser', JSON.stringify(userData));
      }

      // Перезагружаем страницу
      window.location.reload();
    });

    // Добавление имени пользователя в хедер (опционально)
    if (userLoggedIn) {
      const userData = JSON.parse(storedUser);
      // Здесь можно добавить имя пользователя в хедер, если нужно
    }
  });
  document.addEventListener('DOMContentLoaded', function() {
    // Добавляем ссылку на профиль при клике на иконку пользователя
    const userIcon = document.querySelector('.icon:first-child'); // Выбираем первую иконку (пользователя)
    if (userIcon) {
      userIcon.addEventListener('click', function() {
        // Проверяем, авторизован ли пользователь
        const storedUser = localStorage.getItem('iqosUser');
        if (storedUser && JSON.parse(storedUser).isLoggedIn) {
          // Если авторизован - переходим на страницу профиля
          window.location.href = 'account.html';
        } else {
          // Если не авторизован - переходим на страницу входа
          window.location.href = 'login.html';
        }
      });
    }
  });
  document.addEventListener('DOMContentLoaded', function() {
    // Находим все кнопки "Dodaj do koszyka" на главной странице
    const addToCartButtons = document.querySelectorAll('.add-to-cart');

    addToCartButtons.forEach(button => {
      button.addEventListener('click', function() {
        // Получаем родительский контейнер товара
        const productContainer = this.closest('.product-container');
        if (!productContainer) return;

        // Получаем данные о товаре
        const productTitle = productContainer.querySelector('.product-title').textContent;
        const productPrice = parseFloat(productContainer.querySelector('.product-price').textContent.replace(',', '.').replace(/[^\d.]/g, ''));
        const selectedColorOption = productContainer.querySelector('.color-option.active');
        const colorCode = selectedColorOption ? selectedColorOption.getAttribute('data-color') : 'default';
        const colorName = selectedColorOption ? getColorName(colorCode) : 'Standard';

        // Получаем изображение товара
        const productImage = productContainer.querySelector('.product-image img').src;

        // Создаем объект товара
        const product = {
          id: getProductId(productTitle), // Определяем ID товара по названию
          name: productTitle,
          color: colorCode,
          colorName: colorName,
          price: productPrice,
          image: productImage,
          quantity: 1,
          registration: false
        };

        // Добавляем товар в корзину
        addProductToCart(product);
      });
    });

    // Функция определения ID товара по названию
    function getProductId(title) {
      if (title.includes('PRIME')) return 'iluma-prime';
      else if (title.includes('ONE')) return 'iluma-one';
      else if (title.includes('ILUMA')) return 'iluma';
      else return 'unknown-product';
    }

    // Функция получения названия цвета
    function getColorName(colorCode) {
      const colorMap = {
        'green': 'Moss Green',
        'beige': 'Beige',
        'black': 'Black',
        'pink': 'Rose',
        'blue': 'Ocean Blue',
        'gray': 'Pebble Grey',
        'purple': 'Purple',
        'sand': 'Beige'
      };
      return colorMap[colorCode] || colorCode;
    }

    // Функция добавления товара в корзину
    function addProductToCart(product) {
      // Получаем текущую корзину из localStorage
      const cartData = localStorage.getItem('iqosCart');
      const cart = cartData ? JSON.parse(cartData) : [];

      // Проверяем, существует ли товар уже в корзине
      const existingProductIndex = cart.findIndex(item =>
        item.id === product.id && item.color === product.color
      );

      if (existingProductIndex !== -1) {
        // Если товар существует, увеличиваем количество
        cart[existingProductIndex].quantity += 1;
      } else {
        // Если товар не существует, добавляем его
        cart.push(product);
      }

      // Сохраняем обновленную корзину в localStorage
      localStorage.setItem('iqosCart', JSON.stringify(cart));

      // Обновляем значок корзины
      updateCartBadge();

      // Показываем модальное окно подтверждения, если оно есть
      const modal = document.getElementById('add-to-cart-modal');
      if (modal) {
        // Заполняем данными о добавленном товаре
        document.getElementById('modal-product-image').src = product.image;
        document.getElementById('modal-product-name').textContent = product.name;
        document.getElementById('modal-product-color').textContent = product.colorName;

        // Показываем модальное окно
        modal.style.display = 'flex';
      } else {
        // Если модального окна нет, показываем простое уведомление
        alert('Produkt dodany do koszyka!');
      }
    }

    // Функция обновления значка корзины
    function updateCartBadge() {
      const cartData = localStorage.getItem('iqosCart');
      if (cartData) {
        const cart = JSON.parse(cartData);
        const itemCount = cart.reduce((total, item) => total + item.quantity, 0);

        const cartBadges = document.querySelectorAll('.icon-badge');
        cartBadges.forEach(badge => {
          if (itemCount > 0) {
            badge.textContent = itemCount;
            badge.style.display = 'flex';
          } else {
            badge.style.display = 'none';
          }
        });
      }
    }
  });
  // Этот код нужно вставить в <head> или перед закрывающим тегом </body> на странице index.html

  document.addEventListener('DOMContentLoaded', function() {
    // 1. Добавление крестика для закрытия модального окна
    const modal = document.getElementById('add-to-cart-modal');
    if (modal) {
      // Находим первый div внутри модального окна (его содержимое)
      const modalContent = modal.querySelector('div');

      if (modalContent) {
        // Создаем крестик для закрытия окна
        const closeButton = document.createElement('div');
        closeButton.id = 'close-modal-button';
        closeButton.innerHTML = '✕';
        closeButton.style.position = 'absolute';
        closeButton.style.top = '10px';
        closeButton.style.right = '15px';
        closeButton.style.fontSize = '24px';
        closeButton.style.cursor = 'pointer';
        closeButton.style.zIndex = '1001';

        // Добавляем обработчик клика на крестик
        closeButton.addEventListener('click', function(e) {
          e.stopPropagation(); // Предотвращаем всплытие события
          modal.style.display = 'none';
        });

        // Вставляем крестик в начало содержимого модального окна
        modalContent.insertBefore(closeButton, modalContent.firstChild);
      }

      // Добавляем обработчик клика на затемненную область для закрытия модального окна
      modal.addEventListener('click', function(event) {
        if (event.target === modal) {
          modal.style.display = 'none';
        }
      });
    }

    // 2. Добавление обработчика клика на иконку корзины
    const cartIcon = document.querySelector('.icon:nth-child(2)');
    if (cartIcon) {
      cartIcon.addEventListener('click', function() {
        window.location.href = 'Koszyk.html';
      });
    }
  });
  // Этот код нужно вставить в <head> или перед закрывающим тегом </body> на странице index.html

  document.addEventListener('DOMContentLoaded', function() {
    // 1. Заменяем эмодзи-иконку пользователя на SVG
    const userIcon = document.querySelector('.icon:first-child');
    if (userIcon) {
      // Создаем SVG иконку пользователя
      const userSvg = `
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="8" r="5"></circle>
        <path d="M20 21a8 8 0 1 0-16 0"></path>
      </svg>
    `;

      // Удаляем эмодзи и вставляем SVG
      userIcon.innerHTML = userSvg;

      // Добавляем обработчик клика (если его еще нет)
      userIcon.addEventListener('click', function() {
        const storedUser = localStorage.getItem('iqosUser');
        if (storedUser && JSON.parse(storedUser).isLoggedIn) {
          window.location.href = 'account.html';
        } else {
          window.location.href = 'login.html';
        }
      });
    }

    // 2. Заменяем эмодзи-иконку корзины на SVG
    const cartIcon = document.querySelector('.icon:nth-child(2)');
    if (cartIcon) {
      // Проверяем, есть ли уже значок badge
      let badge = cartIcon.querySelector('.icon-badge');

      // Создаем SVG иконку корзины
      const cartSvg = `
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M6 2h12l3 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9l3-7z"></path>
        <path d="M16 10a4 4 0 0 1-8 0"></path>
      </svg>
    `;

      // Удаляем эмодзи и вставляем SVG
      cartIcon.innerHTML = cartSvg;

      // Если значок badge уже был, добавляем его заново
      if (badge) {
        cartIcon.appendChild(badge);
      } else {
        // Если значка не было, создаем его
        badge = document.createElement('span');
        badge.className = 'icon-badge';
        badge.style.position = 'absolute';
        badge.style.top = '-8px';
        badge.style.right = '-8px';
        badge.style.backgroundColor = '#65D1CD';
        badge.style.color = 'white';
        badge.style.borderRadius = '50%';
        badge.style.width = '20px';
        badge.style.height = '20px';
        badge.style.display = 'none'; // Изначально скрыт
        badge.style.justifyContent = 'center';
        badge.style.alignItems = 'center';
        badge.style.fontSize = '12px';
        badge.style.fontWeight = 'bold';

        // Добавляем значок в иконку корзины
        cartIcon.appendChild(badge);
      }

      // Добавляем обработчик клика (если его еще нет)
      cartIcon.addEventListener('click', function() {
        window.location.href = 'Koszyk.html';
      });
    }

    // 3. Обновляем значок корзины при загрузке страницы
    function updateCartBadge() {
      const cartData = localStorage.getItem('iqosCart');
      if (cartData) {
        const cart = JSON.parse(cartData);
        const itemCount = cart.reduce((total, item) => total + item.quantity, 0);

        const cartBadges = document.querySelectorAll('.icon-badge');
        cartBadges.forEach(badge => {
          if (itemCount > 0) {
            badge.textContent = itemCount;
            badge.style.display = 'flex';
          } else {
            badge.style.display = 'none';
          }
        });
      }
    }

    // 4. Обеспечиваем обновление значка корзины при добавлении товара
    // Ищем функцию addProductToCart и модифицируем её для вызова updateCartBadge
    const scripts = document.querySelectorAll('script');
    let scriptModified = false;

    scripts.forEach(script => {
      if (script.textContent.includes('function addProductToCart') && !scriptModified) {
        if (!script.textContent.includes('updateCartBadge();')) {
          const modifiedScript = script.textContent.replace(
            'localStorage.setItem(\'iqosCart\', JSON.stringify(cart));',
            'localStorage.setItem(\'iqosCart\', JSON.stringify(cart));\n\n      // Обновляем значок корзины\n      updateCartBadge();'
          );

          // Создаем и выполняем модифицированный скрипт
          const newScript = document.createElement('script');
          newScript.textContent = modifiedScript;
          document.body.appendChild(newScript);
          scriptModified = true;
        }
      }
    });

    // Делаем функцию updateCartBadge глобально доступной
    window.updateCartBadge = updateCartBadge;

    // Обновляем значок корзины при загрузке страницы
    updateCartBadge();
  });
  // Этот код исправляет позицию значка корзины, приближая его к иконке

  document.addEventListener('DOMContentLoaded', function() {
    // Находим иконку корзины
    const cartIcon = document.querySelector('.icon:nth-child(2)');

    if (cartIcon) {
      // Убедимся, что иконка имеет position: relative для корректного позиционирования
      cartIcon.style.position = 'relative';
      cartIcon.style.display = 'inline-block'; // Убедимся, что элемент блочный

      // Находим или создаем значок корзины
      let badge = cartIcon.querySelector('.icon-badge');

      if (!badge) {
        // Если значка нет, создаем его
        badge = document.createElement('span');
        badge.className = 'icon-badge';
        cartIcon.appendChild(badge);
      }

      // Устанавливаем стили для значка, чтобы он был ближе к иконке корзины
      badge.style.position = 'absolute';
      badge.style.top = '-4px'; // Было -8px, делаем ближе к иконке
      badge.style.right = '-4px'; // Было -8px, делаем ближе к иконке
      badge.style.backgroundColor = '#65D1CD';
      badge.style.color = 'white';
      badge.style.borderRadius = '50%';
      badge.style.width = '16px'; // Немного уменьшаем размер для компактности
      badge.style.height = '16px'; // Немного уменьшаем размер для компактности
      badge.style.display = 'none'; // Изначально скрыт
      badge.style.justifyContent = 'center';
      badge.style.alignItems = 'center';
      badge.style.fontSize = '10px'; // Уменьшаем размер шрифта для компактности
      badge.style.fontWeight = 'bold';
      badge.style.textAlign = 'center';
      badge.style.lineHeight = '16px'; // Выравнивание текста по вертикали

      // Обновляем значок корзины сразу при загрузке
      updateCartBadge();
    }
  });

  // Переопределение функции updateCartBadge для глобального использования (если её еще нет)
  if (typeof window.updateCartBadge !== 'function') {
    window.updateCartBadge = function() {
      const cartData = localStorage.getItem('iqosCart');
      if (cartData) {
        const cart = JSON.parse(cartData);
        const itemCount = cart.reduce((total, item) => total + item.quantity, 0);

        const cartBadges = document.querySelectorAll('.icon-badge');
        cartBadges.forEach(badge => {
          if (itemCount > 0) {
            badge.textContent = itemCount;
            badge.style.display = 'flex';
          } else {
            badge.style.display = 'none';
          }
        });
      }
    };
  }

</script>
<!-- Модальное окно подтверждения добавления в корзину -->
<div id="add-to-cart-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center;">
  <div style="background-color: white; width: 90%; max-width: 500px; border-radius: 8px; padding: 20px; position: relative;">
    <h2 style="margin-top: 0; font-size: 24px; border-bottom: 1px solid #eee; padding-bottom: 15px;">
      <span style="display: inline-block; width: 30px; height: 30px; border-radius: 50%; background-color: #65D1CD; color: white; text-align: center; line-height: 30px; margin-right: 10px;">✓</span>
      Produkt dodany do koszyka
    </h2>

    <div id="modal-product-details" style="display: flex; margin: 20px 0;">
      <div style="width: 100px; margin-right: 15px;">
        <img id="modal-product-image" src="" alt="" style="max-width: 100%; max-height: 100px; object-fit: contain;">
      </div>
      <div>
        <div id="modal-product-name" style="font-weight: bold; font-size: 20px; margin-bottom: 5px;"></div>
        <div id="modal-product-color" style="color: #666; margin-bottom: 8px;"></div>
        <div id="modal-product-quantity" style="font-size: 16px;">szt.: 1</div>
      </div>
    </div>

    <div style="display: flex; justify-content: center; margin-top: 30px;">
      <a href="Koszyk.html" style="display: block; text-decoration: none; background-color: #34303D; color: white; padding: 15px 40px; border-radius: 30px; font-weight: bold; text-align: center; font-size: 16px;">
        Koszyk
      </a>
    </div>
  </div>
</div>
<!-- Основное меню -->
<div id="main-menu" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 2000;">
  <div style="background-color: white; width: 100%; height: 100%; max-width: 400px; position: relative; overflow-y: auto;">
    <div style="display: flex; justify-content: space-between; align-items: center; padding: 20px; border-bottom: 1px solid #eee;">
      <div style="font-size: 24px; visibility: hidden;">X</div>
      <div style="font-size: 24px; font-weight: bold;">IQOS</div>
      <div style="font-size: 24px; cursor: pointer;" id="close-main-menu">✕</div>
    </div>

    <div style="padding: 0 20px;">
      <div style="padding: 30px 0; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; cursor: pointer;" id="menu-produkty">
        <span style="font-size: 28px; font-weight: bold;">Produkty</span>
        <span style="font-size: 28px;">›</span>
      </div>

      <!-- Для неавторизованного пользователя: -->
      <div id="auth-menu-item" style="padding: 30px 0; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; cursor: pointer;">
        <span style="font-size: 28px; font-weight: bold;">Zaloguj się</span>
        <span style="font-size: 28px;">›</span>
      </div>

      <!-- Для авторизованного пользователя (будет отображаться через JavaScript): -->
      <div id="logout-menu-item" style="padding: 30px 0; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; cursor: pointer; display: none;">
        <span style="font-size: 28px; font-weight: bold;">Wyloguj się</span>
      </div>






    </div>
  </div>
</div>

<!-- Подменю Produkty -->
<div id="produkty-submenu" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 2100;">
  <div style="background-color: white; width: 100%; height: 100%; max-width: 400px; position: relative; overflow-y: auto;">
    <div style="display: flex; justify-content: space-between; align-items: center; padding: 20px; border-bottom: 1px solid #eee;">
      <div style="font-size: 24px; cursor: pointer;" id="back-to-main-menu">←</div>
      <div style="font-size: 24px; font-weight: bold;">Produkty</div>
      <div style="font-size: 24px; cursor: pointer;" id="close-produkty-submenu">✕</div>
    </div>

    <div style="padding: 0 20px;">
      <a href="index.html" style="text-decoration: none; color: inherit;">
        <div style="padding: 30px 0; border-bottom: 1px solid #eee;">
          <span style="font-size: 28px; font-weight: bold;">Seria IQOS ILUMA i za 49 zł</span>
        </div>
      </a>

      <a href="lil-solid-ez.html" style="text-decoration: none; color: inherit;">
        <div style="padding: 30px 0; border-bottom: 1px solid #eee;">
          <span style="font-size: 28px; font-weight: bold;">lil SOLID Ez za 49 zł</span>
        </div>
      </a>




    </div>
  </div>
</div>

</body>
</html>
